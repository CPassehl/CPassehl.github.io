<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>grab that video</title>
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.8/p5.js"  ></script>  

   <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.8/addons/p5.dom.js"></script>  

   <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.8/addons/p5.sound.js"></script> 

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</head>
<body>

<script>
    var vid1;
    var capture;

function setup() {
  createCanvas(800, 600);
  // specify multiple formats for different browsers
  capture = createCapture(VIDEO);
  //createVideo(['assets/fingers.mov','assets/fingers.webm']);
  capture.size(700, 500);
  vid1.loop();
  //vid1.hide();
  noStroke();
  fill(0);

  //capture.hide();
}

// function setup() {
//   createCanvas(480, 120);
//   var constraints = {
//     video: {
//       mandatory: {
//         minWidth: 1280,
//         minHeight: 720
//       },
//       optional: [
//         { maxFrameRate: 10 }
//       ]
//     },
//     audio: true
//   };
//   createCapture(constraints, function(stream) {
//     console.log(stream);
//   });
// }

function draw() {
  background(255);
  image(capture, 0, 0, 700, 500);
  filter('INVERT');
  vid1.loadPixels();
  var stepSize = round(constrain(mouseX / 8, 6, 32));
  for (var y=0; y<height; y+=stepSize) {
    for (var x=0; x<width; x+=stepSize) {
      var i = y * width + x;
      var darkness = (255 - vid1.pixels[i*4]) / 255;
      var radius = stepSize * darkness;
      ellipse(x, y, radius, radius);
    }
  }
}


// var capture;

// function setup() {
//   createCanvas(390, 240);
//   vid1 = createCapture(VIDEO);
//   vid1.size(320, 240);
//   //capture.hide();
// }

// function draw() {
//   background(255);
//   image(vid1, 0, 0, 320, 240);
//   filter('INVERT');
// }
</script>
</body>
</html>
